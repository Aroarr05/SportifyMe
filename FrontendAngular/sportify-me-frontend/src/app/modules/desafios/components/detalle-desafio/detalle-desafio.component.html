<div class="container mx-auto px-4 py-8 max-w-4xl">
  <app-loading-spinner *ngIf="loading"></app-loading-spinner>
  <app-error-alert *ngIf="error" [message]="error"></app-error-alert>

  <div *ngIf="desafio && !loading" class="bg-white rounded-lg shadow-md overflow-hidden">
    <div class="p-6">
      <div class="flex justify-between items-start mb-6">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">{{ desafio.nombre }}</h1>
          <p class="text-gray-600 mt-2">Creado por {{ desafio.creador.nombre }} el {{ desafio.fechaCreacion | date:'mediumDate' }}</p>
        </div>
        <span class="inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium">
          {{ desafio.tipoActividad }}
        </span>
      </div>

      <div class="mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-2">Descripción</h2>
        <p class="text-gray-700">{{ desafio.descripcion }}</p>
      </div>

      <div class="grid md:grid-cols-2 gap-6 mb-8">
        <div>
          <h2 class="text-xl font-semibold text-gray-800 mb-2">Objetivo</h2>
          <p class="text-gray-700">{{ desafio.objetivo }}</p>
        </div>
        <div>
          <h2 class="text-xl font-semibold text-gray-800 mb-2">Fecha Límite</h2>
          <p class="text-gray-700">{{ desafio.fechaLimite | date:'medium' }}</p>
        </div>
      </div>

      <div class="mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Participantes ({{ desafio.participantes?.length || 0 }})</h2>
        <div *ngIf="desafio.participantes && desafio.participantes.length > 0" class="flex flex-wrap gap-2">
          <span *ngFor="let participante of desafio.participantes" class="px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm">
            {{ participante.nombre }}
          </span>
        </div>
        <p *ngIf="!desafio.participantes || desafio.participantes.length === 0" class="text-gray-500">Aún no hay participantes</p>
      </div>

      <div class="flex justify-center">
        <button
          (click)="unirseADesafio()"
          [disabled]="unirseLoading"
          class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-green-300 transition-colors"
        >
          <span *ngIf="!unirseLoading">Unirse al Desafío</span>
          <span *ngIf="unirseLoading">Uniéndose...</span>
        </button>
      </div>
    </div>
  </div>
</div>