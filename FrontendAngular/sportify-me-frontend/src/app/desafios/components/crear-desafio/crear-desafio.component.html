<div class="container mt-4">
  <h2 class="mb-4">Crear Nuevo Desafío Deportivo</h2>
  
  <form #desafioForm="ngForm" (ngSubmit)="onSubmit(desafioForm)" class="needs-validation" novalidate>
    <!-- Nombre -->
    <div class="mb-3">
      <label for="nombre" class="form-label">Nombre del Desafío</label>
      <input type="text" class="form-control" id="nombre" 
             [(ngModel)]="desafio.nombre" name="nombre" 
             required minlength="5" maxlength="100"
             #nombre="ngModel">
      <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="text-danger">
        <small *ngIf="nombre.errors?.['required']">El nombre es obligatorio</small>
        <small *ngIf="nombre.errors?.['minlength']">Mínimo 5 caracteres</small>
      </div>
    </div>

    <!-- Descripción -->
    <div class="mb-3">
      <label for="descripcion" class="form-label">Descripción</label>
      <textarea class="form-control" id="descripcion" rows="3"
                [(ngModel)]="desafio.descripcion" name="descripcion"
                required #descripcion="ngModel"></textarea>
      <div *ngIf="descripcion.invalid && (descripcion.dirty || descripcion.touched)" class="text-danger">
        <small>La descripción es obligatoria</small>
      </div>
    </div>

    <!-- Tipo de Actividad -->
    <div class="mb-3">
      <label for="tipoActividad" class="form-label">Tipo de Actividad</label>
      <select class="form-select" id="tipoActividad"
              [(ngModel)]="desafio.tipoActividad" name="tipoActividad"
              required #tipoActividad="ngModel">
        <option *ngFor="let tipo of tiposActividad" [value]="tipo">
          {{ tipo | titlecase }}
        </option>
      </select>
    </div>

    <!-- Objetivo -->
    <div class="mb-3">
      <label for="objetivo" class="form-label">Objetivo</label>
      <input type="text" class="form-control" id="objetivo"
             [(ngModel)]="desafio.objetivo" name="objetivo"
             required #objetivo="ngModel">
      <div class="form-text">Ejemplo: "Correr 5 km en menos de 30 minutos"</div>
    </div>

    <!-- Fecha Límite -->
    <div class="mb-4">
      <label for="fechaLimite" class="form-label">Fecha Límite</label>
      <input type="date" class="form-control" id="fechaLimite"
             [(ngModel)]="desafio.fechaLimite" name="fechaLimite"
             required min="{{ minDate }}" #fechaLimite="ngModel">
      <div *ngIf="fechaLimite.errors?.['min']" class="text-danger">
        <small>La fecha no puede ser anterior a hoy</small>
      </div>
    </div>

    <!-- Botones -->
    <div class="d-flex justify-content-between">
      <button type="button" class="btn btn-outline-secondary" (click)="router.navigate(['/desafios'])">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="desafioForm.invalid">
        Crear Desafío
      </button>
    </div>
  </form>
</div>